hx={giveAFace:function(t){var a,e={facePath:"http://static.hx2cars.com/resource/web/dist/static/mobpages/images/facebox",faceQuantity:75,faceBox:"faceBox",addWhere:"",showButton:"",input:"",closeButton:"",beforeCallback:null,showCallback:null,selectCallback:null,closeCallback:null};function i(){"function"==$.type(a.beforeCallback)&&a.beforeCallback();var t="";if(0==$("#"+a.faceBox).length){t+='<div class="'+a.faceBox+'" id="'+a.faceBox+'"><ul>';for(var e=1;e<a.faceQuantity+1;e++)t+='<li><img src="'+a.facePath+"/"+e+'.gif" dmark="[hx_'+e+']"></li>';t+="</div></ul>"}$(a.addWhere).append(t),$("#"+a.faceBox+" li").off().on({click:function(){(function(){var t=$(a.input).val();t+=$(this).find("img").attr("dmark"),$(a.input).val(t),"function"==$.type(a.selectCallback)&&a.selectCallback()}).call($(this))}})}this.init=function(t){a=$.extend({},e,t),$(a.showButton).blockFly({targetId:a.addWhere,flyType:3,ifShadow:!1,beginLocation:"100%",targetLocation:"0%",closebuttonId:a.closeButton,flyCallback:i,closeCallback:a.closeCallback,nextCallback:a.showCallback})},this.init(t)},MobileBrand:function(t){var l,a,i,s,o,c,d,e={getFirstgradeId:"",secondSp:!1,thirdSp:!1,flyCallback:null,secondCallback:null,forthCallback:null},n="",h="",r="";function f(){$("#sgradeArrow").click(),$("#tgradeArrow").click()}function p(){if(l.othis=$(this),$.cookie("brdHis")){var t=$.cookie("brdHis").split("|"),e="";$("#fgHistory").show().find("#fghHis").html("");for(var a=0;a<t.length-1;a++){var i=t[a].split("&");e+='<li class="getSecondgrade" data-fid="'+i[1]+'">',e+='<p class="fghhLogo"><img src="'+i[2]+'" alt=""></p>',e+='<p class="fghhName">'+i[0]+"</p></li>"}$("#fghHis").html(e)}$.post("/tools/getonelevelbrand.json",{},function(t){if($("#fgList").html(""),$("#letterNav").html("<span>#</span>"),t){for(var e=t.logoList,a="",i="",s=0;s<e.length;s++){a+='<div class="fglAlone">',a+='<p class="fglaLetter">'+e[s].key+"</p>",i+="<span>"+e[s].key+"</span>";for(var o=e[s].value,n=0;n<o.length;n++)a+='<span class="getSecondgrade" data-fid="'+o[n].id+'"><img src="http://img.hx2cars.com/upload/brandlogo/'+o[n].logo+'" alt="">'+o[n].title+"</span>";a+="</div>"}$("#fgList").append(a),$("#letterNav").append(i)}if($(".firstGrade .getSecondgrade").blockFly({targetId:".secondGrade",flyType:2,ifShadow:!1,beginLocation:"100%",targetLocation:"0%",closebuttonId:"#sgradeArrow",nextCallback:m}),l.othis.hasClass("brandOne")){var r=$("#choiceBrands").attr("carbigserial-val");$("#fgList .getSecondgrade").each(function(){$(this).attr("data-fid")==r&&($(this).click(),$("#choiceBrands").removeClass("brandOne"))})}$("#letterNav").height(),d={y:$("#letterNav").offset().top},$("#letterNav").off("touchmove").on({touchmove:function(t){if(t.stopPropagation(),t.preventDefault(),1<t.originalEvent.touches.length)$(this).off("touchmove").off("touchend");else{var e=t.originalEvent.targetTouches[0];(function(t){c={y:t.pageY};var e=$("#letterNav span").height(),a=c.y-d.y,i=parseInt((a-5)/e,10);0<=i&&i<$("#letterNav span").length&&($("#preLetter").show().html($("#letterNav span").eq(i).html()),g(i)),$("#letterNav").off("touchend").on({touchend:function(t){$("#preLetter").hide().html("")}})}).call($(this),e)}}}),$("#letterNav span").off("touchmove").on({touchstart:function(){var t=$(this).index();$("#preLetter").show().html($(this).html()),g(t)},touchend:function(){$("#preLetter").hide().html("")}})})}function g(t){var e=0,a=$("#firstTitle").height(),i=$("#fgHistory:visible").height();if(0!==t){e=a+i;for(var s=0;s<t-1;s++)e+=$("#fgList .fglAlone").eq(s).height()}$(".firstGrade .fGrade").animate({scrollTop:e},0)}function m(){a=$(this).text(),r=a,n=$(this).attr("data-fid"),o=$(this).find("img").attr("src"),1<$("#allGrade").contents().length&&$("#allGrade").contents().eq(0).remove(),$("#allGrade").prepend(r),$.post("/mobile/appMatchRequire/getCarSerialByParentIdJson.json",{pids:n},function(t){if(l.secondSp?$("#getThirdgrade").html('<span data-sid="'+n+'">涓嶉檺</span>'):$("#getThirdgrade").html(""),t){var e=t.sonCarSerials,a="";for(var i in e){a+='<p class="sglTheme">'+i+"</p>";for(var s=0;s<e[i].length;s++)a+='<span data-sid="'+e[i][s].id+'" data-btype ="'+e[i][s].bigType+'">'+e[i][s].title+"</span>"}$("#getThirdgrade").append(a)}$("#getThirdgrade span").blockFly({targetId:".thirdGrade",flyType:2,ifShadow:!1,beginLocation:"100%",targetLocation:"0%",closebuttonId:"#tgradeArrow",flyCallback:u,nextCallback:v})})}function u(){if("涓嶉檺"==$(this).text())return n=$(this).attr("data-sid"),"function"==$.type(l.secondCallback)&&l.secondCallback(r,n),!1}function v(){i=$(this).html(),r=a+" "+i,h=$(this).attr("data-sid"),1<$("#allGrade2").contents().length&&$("#allGrade2").contents().eq(0).remove(),$("#allGrade2").prepend(r),$.post("/car/getCarTypeByParentIdJson.json",{parentId:h},function(t){if(l.thirdSp?$("#tglForthgrade").html('<span class="tghrFourgrade" data-foid="'+h+'">涓嶉檺</span>'):$("#tglForthgrade").html(""),$("#getForthgrade").html(""),t){for(var e="",a=t.titles,i=0;i<a.length;i++)e+="<span>"+a[i]+"</span>";$("#getForthgrade").append(e);for(var s="",o=t.maps,n=0;n<o.length;n++){s+='<span class="tghrYear">'+o[n].key+"</span>";for(var r=o[n].value,c=0;c<r.length;c++)s+='<span class="tghrFourgrade" data-time="'+o[n].key+'" data-foid="'+r[c].id+'">'+r[c].subject+"</span>"}$("#tglForthgrade").append(s)}$("#getForthgrade span").off().on({click:function(){$("#getForthgrade span").removeClass("thirdOn"),$(this).addClass("thirdOn");var t,e=$(this).html();t=e,$.post("/car/getCarTypeByParentIdKuanxin.json",{parentId:h,title:t},function(t){if($("#tglForthgrade").html(""),t){for(var e="",a=t.maps,i=0;i<a.length;i++){e+='<span class="tghrYear">'+a[i].key+"</span>";for(var s=a[i].value,o=0;o<s.length;o++)e+='<span class="tghrFourgrade" data-foid="'+s[o].id+'" data-time="'+s[o].years+'">'+s[o].subject+"</span>"}$("#tglForthgrade").append(e)}$("#tglForthgrade .tghrFourgrade").off().on({click:function(){b.call($(this),l)}})})}}),$("#tglForthgrade .tghrFourgrade").off().on({click:function(){b.call($(this),l)}})})}function b(t){s=$(this).html(),r="涓嶉檺"==s?a+" "+i:a+" "+i+" "+s,foid=$(this).attr("data-foid");var e=a+"&"+n+"&"+o;$.setCookie({cName:"brdHis",cValue:e,ifAdd:!0,addLength:8,cDomain:".hx2car.com"}),"function"==$.type(t.forthCallback)&&t.forthCallback(r,foid,h,n,l.othis)}this.init=function(t){l=$.extend({},e,t),$("body").append('<section class="fourgradeBrand"><div class="firstGrade" style="display:none;"><div class="fGrade"><div class="fgTitle" id="firstTitle">閫夋嫨鍝佺墝<i id="fgradeArrow"></i></div><div class="fgHistory" id="fgHistory"><p class="fghTitle">娴忚鍘嗗彶<span id="deleteHis">鍒犻櫎鍘嗗彶</span></p><ul class="fghHis" id="fghHis"></ul></div><div class="fgList" id="fgList"></div></div><div class="letterNav" id="letterNav"></div><div class="preLetter" id="preLetter" style="display:none;"></div></div><div class="secondGrade" style="display:none;"><div class="fgTitle" id="allGrade"><i id="sgradeArrow"></i></div><div class="sgList" id="getThirdgrade"></div></div><div class="thirdGrade" style="display:none;"><div class="fgTitle" id="allGrade2" style="position:absolute;top:0;"><i id="tgradeArrow"></i></div><div class="tgList"><div class="tglLeft" id="getForthgrade"></div><div class="tglRight" id="tglForthgrade"></div></div></div></section>'),$.cookie("brdHis")||$("#fgHistory").hide(),$("#deleteHis").off().on("click",function(){$.cookie("brdHis")&&($.cookie("brdHis","",{expires:-1,domain:".hx2car.com",path:"/"}),$("#fgHistory").hide().find("#fghHis").html(""))}),$(l.getFirstgradeId).blockFly({targetId:".firstGrade",flyType:2,ifShadow:!0,preventDiv:".ipage",beginLocation:"100%",targetLocation:"0%",closebuttonId:"#fgradeArrow",closeCallback:f,nextCallback:p})},this.init(t)},mphoneNumCheck:function(t){var e,a={checkedCallback:null};function i(t){"function"==$.type(e.checkedCallback)?e.checkedCallback(t):location.reload()}this.init=function(){e=$.extend({},a,t),$("body").append('<section class="cpage" id="phoneNumcheckpage" style="display:none;"><div class="mmTop"><i class="mmtBack" id="bottomArrow"></i>鎵嬫満楠岃瘉</div><div class="introduce"><p class="iPic"></p><p class="iTip"></p></div><div class="mobcheck"><div class="mBox"><div class="mbTel"><input type="tel" placeholder="璇疯緭鍏ユ墜鏈哄彿鐮�" id="mbTel"></div><div class="mbCode"><input type="number" placeholder="璇疯緭鍏ュ浘鐗囬獙璇佺爜" id="mbPic"><span class="mbcPiccode"><img title="鐐瑰嚮鍒锋柊" id="mbcPiccode" src="/servlet/yzCode.jpg" onclick="javascript:this.src=&quot;/servlet/yzCode.jpg?rnd=&quot;+Math.random();"></span></div><div class="mbCode"><input type="number" placeholder="璇疯緭鍏ユ墜鏈洪獙璇佺爜" id="mbcInput"><span id="mbcObtain">鑾峰彇楠岃瘉鐮�</span></div></div><div class="mBtn"><a id="mbSubmit">纭� 瀹�</a></div></div></section>'),$("#mbSubmit").numberCheck({mbPic:"#mbPic",picCode:"#mbcPiccode",mbcInput:"#mbcInput",obtainCode:"#mbcObtain",numberInput:"#mbTel",checkCallback:i})},this.init(t)},Chat:function(t){var d,h={carid:"",targetPhoto:"",targetName:"",targetHxid:""},f=null,c=null,s=this;f=JSON.parse($.cookie("hxuser"));var o=new Easemob.im.Connection;o.init({onOpened:function(){s.chatInit(t),o.setPresence()},onTextMessage:function(t){var e=t.from,a=t.data,i=t.ext.carID;s.acMessage(e,a,"",i)},onPictureMessage:function(t){var e=t.from;s.acMessage(e,"[鍥剧墖]","Notext")},onAudioMessage:function(t){var e=t.from;s.acMessage(e,"[璇煶]","Notext")},onLocationMessage:function(t){var e=t.from;s.acMessage(e,"[杞﹁浣嶇疆]","Notext")}});var e=JSON.stringify(f),a=$.cookie("unique_cookie");"null"!=e?(1200<e.length&&(f.contacts=null,$.cookie("hxuser",JSON.stringify(f),{expires:365,path:"/",domain:".hx2car.com"})),o.open({user:f.username,pwd:f.password,appKey:"hx2car#hx2car"})):null!==a&&""!==a?$.post("/chat/gethxyouke.json",{},function(t){o.open({user:t.username,pwd:t.password,appKey:"hx2car#hx2car"}),f=new s.chat.aduser(t.username,t.password,null,null,"http://static.hx2cars.com/resource/web/dist/static/mobpages/images/carchat/default_photo.png"),$.cookie("hxuser",JSON.stringify(f),{expires:365,path:"/",domain:".hx2car.com"})}):$.alertMessage.call($(this),"瀵逛笉璧凤紝鎮ㄧ殑娴忚鍣ㄤ笉鏀寔璇ユ湇鍔★紒"),this.chatInit=function(t){f=JSON.parse($.cookie("hxuser")),null!==(d=$.extend({},h,t)).carid&&""!==d.carid&&(this.chat.sendcar(),this.chat.savecar());var e=f.contacts,a=f.photo;console.log(f.photo);var i=0;if(null!==e){for(var s=0;s<e.length;s++)if(d.targetHxid==e[s].username){i=1;var o=e[s].msg,n="";if(null!==o){$("#cmTip").hide();for(var r=0;r<o.length;r++)switch(o[r].type){case 0:n+='<div class="cmbMe">',n+='<div class="cmbmTell"><span class="cmbmtSay">'+o[r].msg+'</span><span class="cmbmtArrow"><b></b></span></div>',n+='<div class="cmbmHead"><img src="'+a+'"></div>',n+="</div>";break;case 1:n+='<div class="cmbYou">',n+='<div class="cmbmTell">',/^\[[\u4e00-\u9fa5]{0,4}\]$/.test(o[r].msg)?n+='<span class="cmbmtSay goAppDown">'+o[r].msg+'璇锋墦寮€鍗庡APP鏌ョ湅锛�</span><span class="cmbmtArrow"><b></b></span>':""!==o[r].id&&void 0!==o[r].id?n+='<a class="cmbmtSay" href="/details/'+o[r].id+'">'+o[r].msg+'</a><span class="cmbmtArrow"><b></b></span>':n+='<span class="cmbmtSay">'+o[r].msg+'</span><span class="cmbmtArrow"><b></b></span>',n+="</div>",e[s].photo?n+='<div class="cmbmHead"><img src="'+e[s].photo+'"></div>':n+='<div class="cmbmHead"><img src="http://static.hx2cars.com/resource/web/dist/static/mobpages/images/carchat/default_photo.png"></div>',n+="</div>";break;case 2:n+='<div class="cmbTime">'+o[r].msg+"</div>"}$("#cmBox").append(n),p()}}}else e=[];if(0===i){var c=new this.chat.adcontact(d.targetName,d.targetHxid,0,d.targetPhoto,null);e.unshift(c)}10<e.length&&e.pop(),f.contacts=e,$.cookie("hxuser",JSON.stringify(f),{expires:365,path:"/",domain:".hx2car.com"});var l=$("body")[0].scrollHeight+300;$("html,body").stop(!0,!1).animate({scrollTop:l})},this.chat={sendcar:function(){$.post("/chat/savechatcar.json",{token:f.username,phoneNo:f.mobile,userId:f.userid,carid:d.carid},function(t){})},savecar:function(){$.post("/chat/sendcarinfo.json",{id:d.carid,loginName:d.targetHxid+","+f.username},function(t){})},aduser:function(t,e,a,i,s){this.username=t,this.password=e,this.contacts=a,this.mobile=i,this.photo=s},addmsg:function(t,e,a,i){this.type=t,this.msg=e,this.time=a,this.id=i},adcontact:function(t,e,a,i,s){this.name=t,this.username=e,this.carid=a,this.photo=i,this.msg=s}},this.sendmessage=function(t){var e=$("#cibpMessage").val();if(""!==$.trim(e)){var a;null!==c&&3e5<(new Date).getTime()-c.time&&(a='<div class="cmbTime">'+$.timeFormat(new Date,"yyyy/MM/dd HH:mm:ss")+"</div>",$("#cmBox").append(a));var i="";i+='<div class="cmbMe">',i+='<div class="cmbmTell"><span class="cmbmtSay">'+e+'</span><span class="cmbmtArrow"><b></b></span></div>',""!==t&&(f.photo=t,$.cookie("hxuser",JSON.stringify(f),{expires:365,path:"/",domain:".hx2car.com"})),i+='<div class="cmbmHead"><img src="'+f.photo+'"></div>',console.log(f.photo),i+="</div>",$("#cmBox").append(i),$("#cibpMessage").val(""),$("#cmTip").hide();var s=$("body")[0].scrollHeight+100;$("html,body").stop(!0,!1).animate({scrollTop:s}),o.sendTextMessage({to:d.targetHxid,msg:e,type:"chat"}),c=new this.chat.addmsg(0,e,(new Date).getTime()),l.call(this,d.targetHxid,e,0)}else $.alertMessage.call($(this),"鍙戦€佸唴瀹逛笉鑳戒负绌�")},this.acMessage=function(t,e,a,i){var s;null!==c&&3e5<(new Date).getTime()-c.time&&(s='<div class="cmbTime">'+$.timeFormat(new Date,"yyyy/MM/dd HH:mm:ss")+"</div>",$("#cmBox").append(s));var o="",n="";o+='<div class="cmbYou">',o+='<div class="cmbmTell">',""==a&&"[鍚嶇墖]"==e?o+='<span class="cmbmtSay goAppDown">'+e+'璇锋墦寮€鍗庡APP鏌ョ湅锛�</span><span class="cmbmtArrow"><b></b></span>':""!==i&&void 0!==i?(o+='<a class="cmbmtSay" href="/details/'+i+'">'+e+'</a><span class="cmbmtArrow"><b></b></span>',n=i):o+="Notext"==a?'<span class="cmbmtSay goAppDown">'+e+'璇锋墦寮€鍗庡APP鏌ョ湅锛�</span><span class="cmbmtArrow"><b></b></span>':'<span class="cmbmtSay">'+e+'</span><span class="cmbmtArrow"><b></b></span>',o+="</div>",""!==d.targetPhoto?o+='<div class="cmbmHead"><img src="'+d.targetPhoto+'"></div>':o+='<div class="cmbmHead"><img src="http://static.hx2cars.com/resource/web/dist/static/mobpages/images/carchat/default_photo.png"></div>',o+="</div>",$("#cmBox").append(o);var r=$("body")[0].scrollHeight+100;$("html,body").stop(!0,!1).animate({scrollTop:r}),p(),c=new this.chat.addmsg(1,e,(new Date).getTime()),l.call(this,t,e,1,n)};var l=function(t,e,a,i){for(var s=f.contacts,o=0;o<s.length;o++)if(s[o].username==t){var n=s[o].msg,r=null;if(null===n&&(n=[]),0<n.length&&2!=n[n.length-1].type){var c=n[n.length-1];3e5<(new Date).getTime()-c.time&&(r=new this.chat.addmsg(2,$.timeFormat(new Date,"yyyy/MM/dd HH:mm:ss")),n.push(r))}r=new this.chat.addmsg(a,e,(new Date).getTime(),i),n.push(r),20<n.length&&n.shift(),s[o].msg=n,f.contacts=s,$.cookie("hxuser",JSON.stringify(f),{expires:365,path:"/",domain:".hx2car.com"})}};function p(){$(".goAppDown").click(function(){$.hxWaptoapp()})}}},function(r,i,s,c){var l=r(i);r.fn.lazyload=function(t){function e(){var e=0;o.each(function(){var t=r(this);if(!n.skip_invisible||t.is(":visible"))if(r.abovethetop(this,n)||r.leftofbegin(this,n));else if(r.belowthefold(this,n)||r.rightoffold(this,n)){if(++e>n.failure_limit)return!1}else t.trigger("appear"),e=0})}var a,o=this,n={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:i,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return t&&(c!==t.failurelimit&&(t.failure_limit=t.failurelimit,delete t.failurelimit),c!==t.effectspeed&&(t.effect_speed=t.effectspeed,delete t.effectspeed),r.extend(n,t)),a=n.container===c||n.container===i?l:r(n.container),0===n.event.indexOf("scroll")&&a.bind(n.event,function(){return e()}),this.each(function(){var i=this,s=r(i);i.loaded=!1,(s.attr("src")===c||!1===s.attr("src"))&&s.is("img")&&s.attr("src",n.placeholder),s.one("appear",function(){if(!this.loaded){if(n.appear){var t=o.length;n.appear.call(i,t,n)}r("<img />").bind("load",function(){var t=s.attr("data-"+n.data_attribute);s.hide(),s.is("img")?s.attr("src",t):s.css("background-image","url('"+t+"')"),s[n.effect](n.effect_speed),i.loaded=!0;var e=r.grep(o,function(t){return!t.loaded});if(o=r(e),n.load){var a=o.length;n.load.call(i,a,n)}}).attr("src",s.attr("data-"+n.data_attribute))}}),0!==n.event.indexOf("scroll")&&s.bind(n.event,function(){i.loaded||s.trigger("appear")})}),l.bind("resize",function(){e()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&l.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&o.each(function(){r(this).trigger("appear")})}),r(s).ready(function(){e()}),this},r.belowthefold=function(t,e){return(e.container===c||e.container===i?(i.innerHeight?i.innerHeight:l.height())+l.scrollTop():r(e.container).offset().top+r(e.container).height())<=r(t).offset().top-e.threshold},r.rightoffold=function(t,e){return(e.container===c||e.container===i?l.width()+l.scrollLeft():r(e.container).offset().left+r(e.container).width())<=r(t).offset().left-e.threshold},r.abovethetop=function(t,e){return(e.container===c||e.container===i?l.scrollTop():r(e.container).offset().top)>=r(t).offset().top+e.threshold+r(t).height()},r.leftofbegin=function(t,e){return(e.container===c||e.container===i?l.scrollLeft():r(e.container).offset().left)>=r(t).offset().left+e.threshold+r(t).width()},r.inviewport=function(t,e){return!(r.rightoffold(t,e)||r.leftofbegin(t,e)||r.belowthefold(t,e)||r.abovethetop(t,e))},r.extend(r.expr[":"],{"below-the-fold":function(t){return r.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!r.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return r.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!r.rightoffold(t,{threshold:0})},"in-viewport":function(t){return r.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!r.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return r.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!r.rightoffold(t,{threshold:0})}})}(jQuery,window,document);